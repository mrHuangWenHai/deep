webpackJsonp([21],{Hxhb:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Xxa5"),n=s.n(a),l=s("exGp"),o=s.n(l),i=s("fZjL"),r=s.n(i),c=s("QOcB"),d=s("RO48"),u=s("f+26"),m=s("igLI"),p=1,f={components:{BasicInfo:c.a},mounted:function(){var e=this,t=this.$route.params.id;Object(d._13)(t).then(function(t){Object(m.i)(t)&&(e.user=t.data.model,e.models.expert=e.user.userRealname,e.models.uploader=e.user.pkUserid)})},data:function(){var e=[{value:"母"},{value:"公"}],t=function(t,s){s(e)};return{items:[{label:"性别",model:"sex",type:"select",fetchSuggestions:t},{label:"商标耳牌",model:"brand"},{label:"检疫耳牌",model:"vaccine",mr:1},{label:"就诊专家",model:"expert",type:"select"},{label:"上传图片或视频:",model:"file",type:"file",fetchSuggestions:t}],models:{file:null,sex:null,brand:null,vaccine:null,expert:null,uploader:null}}},watch:{"models.sex":function(e){this.models.brand="公"===e?"G":"M"}},methods:{submit:function(){var e=this;if(!this.beforeUpload(this.models.file))return!1;var t=new FormData;r()(this.models).forEach(function(s){t.append(s,e.models[s])});var s,a={};a[u.a]=window.localStorage.getItem(u.d),window.fetch(u.b+"/uploadFile/upload",{method:"POST",headers:a,body:t}).then((s=o()(n.a.mark(function t(s){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.json();case 2:a=t.sent,Object(m.i)(a)&&e.$message.success("提交成功");case 4:case"end":return t.stop()}},t,e)})),function(e){return s.apply(this,arguments)}),function(t){e.$message.error("提交失败")})},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,s=e.size/1024/1024<p;return!(t&&!s)||(this.$message.error("上传图片大小不能超过 "+p+" MB!"),!1)}}},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"admin-form"},[s("p",{staticClass:"card-title"},[e._v("诊断可视")]),e._v(" "),s("basic-info",{attrs:{items:e.items,models:e.models}}),e._v(" "),s("div",{staticClass:"card"},[s("p",{staticClass:"card-title"},[e._v("症状描述:")]),e._v(" "),s("el-input",{attrs:{type:"textarea"},model:{value:e.models.symptom,callback:function(t){e.$set(e.models,"symptom",t)},expression:"models.symptom"}})],1),e._v(" "),s("div",{staticClass:"card"},[s("p",{staticClass:"card-title"},[e._v("解决方法:")]),e._v(" "),s("el-input",{attrs:{type:"textarea"},model:{value:e.models.solution,callback:function(t){e.$set(e.models,"solution",t)},expression:"models.solution"}})],1),e._v(" "),s("div",{staticClass:"admin-send"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交/更新")])],1)],1)},staticRenderFns:[]};var b=s("VU/8")(f,v,!1,function(e){s("QSD8")},null,null);t.default=b.exports},QSD8:function(e,t){}});
//# sourceMappingURL=21.27de926e77853bdbf5ee.js.map