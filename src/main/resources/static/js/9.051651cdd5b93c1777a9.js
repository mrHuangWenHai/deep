webpackJsonp([9],{"1sy6":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),n=a.n(i),r=a("fZjL"),s=a.n(r),l=a("exGp"),o=a.n(l),c=a("igLI"),p=a("RO48"),u=(a("qKYu"),{props:{hideView:{type:Boolean,default:!1},hideFilter:{type:Boolean,default:!1},modpath:{type:String},getData:{type:Function},deleteData:{type:Function,default:function(){return function(){}}},isCheck:{type:Boolean,default:!1},headers:{type:Array},hidePass:{type:Boolean,default:!1},noPrac:{type:Boolean,default:!1},isAgent:{type:Boolean,default:!1},releaseType:{type:String,default:""},showEdit:{type:Boolean,default:!0},hideEartagFilter:{type:Boolean,default:!1},checkModule:{type:String}},watch:{getData:function(e){this.fetchData()}},mounted:function(){var e=this,t=this.$route.params.id;Object(p._13)(t).then(function(t){Object(c.i)(t)&&(e.user=t.data.model)}).then(this.fetchData)},data:function(){return{load:!0,page:1,total:10,tableData:[{id:1,manage:"2018-01-01",eNutritionT:"2018-05-10"}],isPass:null,factoryName:null,options:{"所有数据":null,"未通过":0,"已通过":1,"未审核":2},eartag:null,gmtCreate:null}},methods:{cellClick:function(e){var t=e.id,a="/admin/"+this.$route.params.id+"/"+this.modpath+"/more?more="+t;this.$router.push(a)},Spv:function(e,t){var a=this,i=this.tableData[t],n=i.id;if("未审核"===i.ispassCheck){var r={welfare:p._29,prevention:p._20,"nutrition/breed":p._17,"nutrition/stage":p._28,"health/antiscolic":p._16,"health/disinfect":p._16,"health/immune":p._16},s={welfare:p._27,prevention:p._25,"nutrition/breed":p._22,"nutrition/stage":p._26,"health/antiscolic":p._21,"health/disinfect":p._21,"health/immune":p._21},l={unpassReason:"",factoryNum:this.user.userFactory,professor:this.$route.params.id};20==this.user.userRole?(l.ispassSup=e,r[this.checkModule](n,l).then(function(e){Object(c.i)(e)&&a.$message.success("监督执行成功")},function(e){a.$message.error("监督执行失败")})):(l.ispassCheck=e,s[this.checkModule](n,l).then(function(i){Object(c.i)(i)&&(a.$message.success("审核成功"),a.tableData[t].ispassCheck=e?"已通过":"未通过")},function(e){a.$message.error("审核失败")}))}else this.$message.warning("该条记录已审核")},viewPlan:function(e){var t=this.tableData[e].id;this.$router.push({name:this.modpath,query:{view:t}})},fetchData:function(){var e=this;return o()(n.a.mark(function t(){var a,i,r,l,o,u;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={page:e.page-1,size:10},null!==e.isPass&&(a.ispassCheck=e.isPass),null!==e.factoryName&&(a.factoryName=e.factoryName),null!==e.gmtCreate&&(console.log(e.gmtCreate),a.startTime=e.gmtCreate[0],a.endTime=e.gmtCreate[1]),i=void 0,r=e.user,l=r.userFactory,r.userRealname,o=r.id,r.factoryName,void 0!==l?i=l:void 0!==o&&(i=o),e.load=!0,e.releaseType){t.next=12;break}e.getData(i,a).then(function(t){if(Object(c.i)(t)){var a=t.data;e.isAgent&&a.List.forEach(function(e){e.agentRank=["","省级代理","市级代理","县级代理"][e.agentRank]});var i=a.List[0];i&&null!==i.ispassCheck&&void 0!==i.ispassCheck&&a.List.forEach(function(e){e.ispassCheck=["未通过","已通过","未审核"][e.ispassCheck]}),i&&void 0!==i.killWormDeratization&&a.List.forEach(function(e){var t=["否","是"];s()(e).forEach(function(a){0!==e[a]&&1!==e[a]||(e[a]=t[e[a]])})}),i&&void 0!==i.materialA&&a.List.forEach(function(e){["materialA","materialM","materialO","materialWM","materialWO","roughageP","roughageD","roughageO","roughageWP","roughageWD","roughageWO","pickingM","pickingR","pickingO"].forEach(function(t){e[t]&&-1!==e[t].indexOf("[")&&(e[t]=JSON.parse(e[t]).join(","))})}),e.tableData=a.List,e.total=a.size}e.load=!1},function(t){e.load=!1,e.$message.error("获取数据失败")}),t.next=18;break;case 12:return t.next=14,Object(p._9)(e.releaseType);case 14:u=t.sent,e.tableData=u.data.List,e.total=u.data.size,e.load=!1;case 18:case"end":return t.stop()}},t,e)}))()},edit:function(e,t){var a=this.tableData[e].id,i=void 0,n=this.$route.params.id;i=this.noPrac?t?"/admin/"+n+"/"+this.modpath+"?view="+a:"/admin/"+n+"/"+this.modpath+"?edit="+a:this.isCheck?"/admin/"+n+"/"+this.checkModule+"/prac?check="+a:t?"/admin/"+n+"/"+this.modpath+"/prac?view="+a:"/admin/"+n+"/"+this.modpath+"/prac?edit="+a,this.$router.push(i)},deleteItem:function(e){var t=this;this.$confirm("将永久删除此条记录, 是否继续?","提示",{type:"warning"}).then(function(){var a=t.tableData[e].id;t.deleteData(a).then(function(e){Object(c.i)(e)&&(t.fetchData(),t.$message.success("删除成功!"))})}).catch(function(){return!1})}}}),d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.hideFilter||e.releaseType?e._e():a("div",{staticClass:"admin-list-pass"},[e.hidePass?e._e():a("el-select",{attrs:{width:"120",size:"small",placeholder:"所有数据"},on:{change:function(t){e.fetchData()}},model:{value:e.isPass,callback:function(t){e.isPass=t},expression:"isPass"}},e._l(e.options,function(e,t){return a("el-option",{key:e,attrs:{label:t,value:e}})})),e._v(" "),a("el-input",{staticClass:"pick-erpai",attrs:{size:"small"},model:{value:e.factoryName,callback:function(t){e.factoryName=t},expression:"factoryName"}},[a("template",{slot:"prepend"},[e._v("单位名:")])],2),e._v(" "),e.hideEartagFilter?e._e():a("el-input",{staticClass:"pick-erpai",attrs:{size:"small"},model:{value:e.eartag,callback:function(t){e.eartag=t},expression:"eartag"}},[a("template",{slot:"prepend"},[e._v("耳牌号:")])],2),e._v(" "),a("el-date-picker",{attrs:{size:"small",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",align:"right"},model:{value:e.gmtCreate,callback:function(t){e.gmtCreate=t},expression:"gmtCreate"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.fetchData()}}},[e._v("查询")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.load,expression:"load"}],ref:"table",staticClass:"admin-table",attrs:{"tooltip-effect":"dark",data:e.tableData}},[e._l(e.headers,function(e,t){return a("el-table-column",{key:t,attrs:{"show-overflow-tooltip":"",align:"center",prop:e.prop,label:e.label,width:100}})}),e._v(" "),a("el-table-column",{staticClass:"action",attrs:{fixed:"right",label:"操作",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.releaseType||e.isCheck?e.releaseType?a("div",{staticClass:"opr"},[a("span",{on:{click:function(a){e.viewPlan(t.$index)}}},[e._v("查看")])]):a("div",{staticClass:"opr"},[a("span",{on:{click:function(a){e.Spv(1,t.$index)}}},[e._v("通过")]),e._v(" "),a("span",{on:{click:function(a){e.Spv(0,t.$index)}}},[e._v("拒绝")])]):a("div",{staticClass:"opr"},[e.hideView?e._e():a("span",{on:{click:function(a){e.cellClick(t.row,t.column)}}},[e._v("查看")]),e._v(" "),[e.showEdit?a("span",{on:{click:function(a){e.edit(t.$index)}}},[e._v("编辑")]):e._e(),e._v(" "),a("span",{on:{click:function(a){e.deleteItem(t.$index)}}},[e._v("删除")])]],2)]}}])})],2),e._v(" "),a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"current-page":e.page},on:{"current-change":e.fetchData,"update:currentPage":function(t){e.page=t}}})],1)},staticRenderFns:[]};var h={components:{AdminTable:a("VU/8")(u,d,!1,function(e){a("PVpS")},null,null).exports},data:function(){return{getAllBreeding:p.L,deleteBreeding:p.j,headers:[{prop:"ispassCheck",label:"审核状态",width:"80"},{prop:"factoryName",label:"工厂名"},{label:"配种时间",prop:"breedingTime"},{label:"配种后移至栏/栋",prop:"buildingAfterBreeding"},{label:"母羊商标耳牌",prop:"ramSheepTrademark"},{label:"种公商标耳牌",prop:"eweSheepTrademark"},{label:"管理批次(前后五天内配种，分批次管理)",prop:"manageFlag"},{label:"批次平均分配配种日期",prop:"manageAverageTime"},{label:"执行妊娠前期营养标准(妊娠前三月)",prop:"nutritionBeforePregnancy"},{label:"确定妊娠(配种后20天)",prop:"isPregnancy"},{label:"执行妊娠后期营养标准(妊娠后两月)",prop:"nutritionAfterPregnancy"},{label:"产前免疫种类(产前10|20天)",prop:"prenatalImmunityType"},{label:"产前免疫时间",prop:"prenatalImmunityTime"},{label:"移至待产栏/栋",prop:"buildingToBeRelocated"},{label:"执行产期营养标准(产前一周)",prop:"nutritionBeforeLambing"},{label:"产羔时间",prop:"lambingTime"},{label:"产羔数量",prop:"lambingNumber"},{label:"执行哺乳期营养标准(产后一周)",prop:"nutritionBreastFeeding"},{label:"执行羔羊代乳料营养标准(羔羊一月龄)",prop:"nutritionInsteadBreastFeeding"},{label:"执行断奶前母羊营养标准(断奶前一周)",prop:"nutritionBeforeCutBreastFeeding"},{label:"执行羔羊断奶期营养标准",prop:"nutritionCutBreastFeeding"},{prop:"operatorName",label:"操作人员"},{prop:"professorName",label:"技术审核"},{prop:"supervisorName",label:"监督执行"},{prop:"professorNotPassReason",label:"审核拒绝原因"},{prop:"remark",label:"备注"}]}}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("admin-table",{staticClass:"breed-table",attrs:{modpath:"nutrition/breed",getData:this.getAllBreeding,deleteData:this.deleteBreeding,headers:this.headers}})],1)},staticRenderFns:[]};var m=a("VU/8")(h,f,!1,function(e){a("Axz8")},"data-v-2cdf9938",null);t.default=m.exports},Axz8:function(e,t){},PVpS:function(e,t){},qKYu:function(e,t,a){"use strict";new(a("7+uW").default)}});
//# sourceMappingURL=9.051651cdd5b93c1777a9.js.map